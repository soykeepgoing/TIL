# REST의 핵심은 무상태성(statelessness)
- 서버는 클라이언트의 이전 상태를 기억하지 않는다. 
- 즉 클라이언트가 지금 어떤 상황인지 서버는 모른다. 
    - 세션이 만료되었는지 
    - 어떤 화면을 보고 있는지
    - 과거에 어떤 액션을 취했는지
- 매 요청은 그 자체로 완전한 정보를 가져야 한다. 즉 오로지 현재에만 집중한다. 

# 무상태성은 그래서 불편하다. 
- 클라이언트가 매번 자신의 상태를 알려줘야 한다. 
    - 서버는 오로지 비즈니스 로직과 데이터 관리만 담당하기 때문 

# HATEOAS가 간극을 메워준다!

## HATEOAS는 서버가 클라이언트에게 더 많은 정보를 제공한다. 

Hypermedia as the Engine of Application State

: 하이퍼미디어가 상태 전이를 이끄는 엔진이 된다. 

하이퍼미디어: 서버가 응답하는 데이터가 단순 데이터가 아니다. 

상태 전이: 클라이언트가 취하는 액션들의 변화 

즉, 서버가 클라이언트에게 단순 데이터가 아니라 다양한 정보들을 제공해준다


## 클라이언트가 취할 수 있는 다른 상태에 대한 uri를 제공한다. 

```json
{
  "data": [ /* 게시글 리스트 */ ],
  "_links": {
    "self": { "href": "/posts?page=2&size=20" },
    "next": { "href": "/posts?page=3&size=20" },
    "prev": { "href": "/posts?page=1&size=20" }
  }
}
```
위의 구조에서 게시글에 대한 정보를 보여주고, 게시글 페이지의 이전/다음 페이지에 대한 링크를 함께 응답

위의 코드에서 하이퍼미디어는 `"_links"`에 해당 

이 구조에서 서버는 클라이언트에게 다음 상태로 전이할 수 있는 정보(관련 url등)이 포함됨
- `self` : 현재 상태 표현 
- `next` : 다음 상태로 이동할 수 있는 링크
- `prev` : 이전 상태로 이동할 수 있은 링크 

## 클라이언트는 서버의 맥락을 알 수 있다. 

**기존 무상태성 동작에서 서버와 클라이언트는 서로의 맥락을 모른다.**
- 서버는 클라이언트가 이전에 무엇을 했는지 모른다. 
- 클라이언트 역시 현재 상태는 알 수 있지만 다음 액션을 어떻게 취해야 하는지 모른다. 
    - 예를 들어 클라이언트가 서버에 상품 페이지를 요청했다. 
    - 클라이언트가 장바구니 페이지로 이동하고 싶은데 어떻게 가면 되는지 알 수 없다. 
- 위 경우에서 물론 사용자는 UI를 통해 장바구니로 이동할 수 있지만 브라우저인 클라이언트의 입장에서는 장바구니로 가는 길 (URI)을 알지 못한다. 

**서버는 클라이언트에게 어떤 정보를 보내는가?**
- 서버가 응답하는 정보에는 클라이언트 현재 상태를 바탕으로 할 수 있는 다음 액션, 상태들이 있다.
- 이를 통해 클라이언트는 서버에 할 수 있는 요청들을 파악한다. 

**HATEOAS에서는 서버가 클라이언트에게 다음 액션들에 대한 후보를 알려준다.**
- 서버는 클라이언트에게 하이퍼미디어를 제공한다.
- 하이퍼미디어는 클라이언트 현재 상태에서 취할 수 있는 다른 상태들의 위치(href)를 알려준다. 
- 클라이언트는 응답받은 하이퍼미디어들을 토대로 어떤 위치를 선택하면 되는지 쉽게 알 수 있다.
    - 백엔드적 관점에서 클라이언트는 서버가 알려주는 링크를 따라가면 된다. 

**서버와 클라이언트는 서로의 상태를 파악하고 다음 상태를 충분히 파악한다.**
- 서버와 클라이언트는 여전히 무상태성을 가지며 통신한다. 
    - 어느 한 곳도 서로의 정보를 저장하거나 관리하지 않는다.
    - 각 통신은 서로 독립적으로 유지된다.
- 다만 현재 상태에 대한 다음 상태들의 옵션을 이해하고 기능을 요청할 수 있다. 