# 배경

- 커뮤니티 서비스에서 로그인 시 어떤 http 코드를 반환하면 좋을지 고민했다.
- 후보가 되는 친구들을 적어보고 하나씩 찾아봤다.
- 추가적으로 기술 블로그에서 이야기하는 것들도 찾아봤다.

# 분석

**400 Bad Request** 

1. 요청에서 유효하지 않은 구문, 메시지 프레이밍을 발견했을 때 뱉는 에러 코드 
2. 클라이언트의 요청값을 서버가 아예 이해하지 못했을 때 나오는 에러 
3. 예를 들어 요청 바디의  json 문법이 완전히 깨져서 파싱조차 할 수 없을 때 

**401 Unauthroized**

1. 요청된 리소스에 대한 유효한 인증정보가 없는 경우 
2. 사용자에게 다시 요청을 보낼 수 있다. 
3. 사용자 인증정보에 대한 유효성 검사 실패에서 발생하는 에러 

**404 Not Found** 

1. 클라이언트가 요청한 리소스가 존재하지 않을 때 뱉는 에러코드 
2. 페이지를 띄우는 링크가 브로큰이거나 존재하지 않을때 뜨는 에러 
3. 즉 로그인시도보다 서버에 존재하는 리소스를 요청했는데 실패했을 때 뜨는 에러 같다. 

**409 Conflict** 

1. 서버의 상태와 현재 요청이 충돌했을 때 밭는 에러 코드 
2. 주로 Put 요청에서 발생하는 에러로 버전 제어 충돌 발생에서 유용하게 사용한다.
    1. 버전 제어 충돌이란? 
        1. A가 커뮤니티 게시글을 수정하고 있다. 
        2. 관리자인 B도 해당 게시글을 수정하고, 제출했다. 
        3. A가 게시글 수정을 완료하고 새로운 게시글을 제출했을 때 `409 Conflict`가 뜬다. 
        4. 여기서 b의 제출된 게시글의 버전이 a가 수정하고 제출한 게시글보다 빠르기 때문에 버전 제어로 인한 충돌이 발생한다. 
3. 이외에도 이미 존재하는 unique key를 사용하려고 할때 발생한다. (이메일, 닉네임 중복) 

**블로그 글** 

https://aodtns.tistory.com/120

- 실무에서는 보안이 중요하기 때문에 세분화되어서 어떤 에러가 떴는지 알려주지 않는다고 한다.
- 이유는 그렇게 알려줬을 때 해커들이 쉽게 해킹할 수 있기 때문
- 오히려 성공 / 실패로만 알려주는 경우도 많다고 한다.

# 결과

1. 로그인 실패에서 가장 잘 맞는 코드는 401이라고 생각한다. 
    1. 401은 유효하지 않은 인증정보에 대한 에러코드이다. 로그인 실패의 사유는 인증 정보가 올바르지 않기 때문에 발생하기 때문에 401과 가장 밀접하게 관련이 있다. 
2. 실무에서는 코드에 대한 적확한 사용도 중요하지만 그로 인해 발생하는 보안이슈나 사용자 경험과 같은 문제를 고려할 수 있어야 한다.