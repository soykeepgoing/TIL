작성일 | 251022 

데이터베이스의 이상현상을 막기 위해 테이블을 관리하는 과정 

## 정규화를 하는 이유

테이블 간에 중복 데이터가 많아서 발생할 수 있는 이상 현상을 방지하고자 테이블을 분해하기 위해 정규화 진행 

### **어떤 이상 현상?**

| 학번  | 이름 | 나이 | 강의코드 | 강의명 |
| --- | --- | --- | --- | --- |
| 100 | 김빨강 | 19 | ac1 | 데이터베이스 |
| 101 | 김파랑 | 20 | ac2 | 컴퓨터구조 |
| 102 | 김노랑 | 20 | ac2 | 컴퓨터구조 |
| 103 | 김주황 | 21 | ac3 | 회로이론 |
| 103 | 김주황 | 21 | ac4 | 알고리즘 |

**삽입 이상 | 삽입되면 안되는 데이터가 테이블에 삽입되는 경우**

| 학번 | 이름 | 나이 | 강의코드 | 강의명 |
| --- | --- | --- | --- | --- |
| 104 | 김보라 | 19 | null | null |
- 강의를 수강하지 않은 새로운 학생이 삽입되는 경우 강의 코드와 강의 명은 Null 값이 된다.

**삭제 이상 | 삭제되면 안되는 데이터가 테이블에서 삭제되는 경우** 

‘컴퓨터 구조’ 강의를 삭제하려고 할 때 김파랑, 김노랑 의 데이터가 함께 사라지게 된다. 

**갱신 이상 | 갱신되어야하는 데이터가 갱신되지 않는 경우** 

강의 코드가 ac3인 김주황의 나이를 갱신하면 강의 코드가 ac4인 김주황의 나이는 갱신되지 않는다. 

공통적으로 컬럼 간 연관성이 높아서 발생하는 문제라고 볼 수 있다. 테이블을 분리할 필요성이 보인다. 

## 제 1 정규형 (1NF)

테이블의 칼럼이 원자값을 갖는 것 

| ID | 이름 | 취미 |
| --- | --- | --- |
| 1 | 김하나 | 독서 |
| 2 | 김둘 | 요리, 바이크 |
| 3 | 김셋 | 수영 |

| ID | 이름 | 취미 |
| --- | --- | --- |
| 1 | 김하나 | 독서 |
| 2 | 김둘 | 요리 |
| 2 | 김둘 | 바이크 |
| 3 | 김셋 | 수영 |

## 제 2 정규형 (2NF)

완전 함수 종속 만족 

완전 함수 종속이란?

컬럼들이 기본키와 모두 연관을 갖는 것 

| 학생ID | 과목ID | 성적 | 강의실 |
| --- | --- | --- | --- |
| 100 | 200 | 100 | 200호 |
| 101 | 201 | 100 | 201호 |
| 102 | 200 | 80 | 200호 |
| 103 | 202 | 92 | 202호 |

여기서 기본키는 (학생ID, 과목ID)라는 복합키의 형태를 띈다. 그러나 강의실 정보는 복합키 중 과목ID에만 연관된다. 이럴때 발생할 수 있는 문제는 (1) 데이터 중복, (2) 갱신이상현상이다. (부분함수 종속때문에 제 2정규형 위반) 

(1) 데이터 중복 

과목 ID가 200 → 모든 강의실 정보가 200호 

(2) 갱신 이상 

강의실이 변경된 경우 과목 ID에 따라 검색 후 모두 일일히 변경해줘야 함.  

이 경우 과목 테이블로 분리해서 따로 분리해준다. 

---

**부분 함수 종속은 복합키에서만 일어나는가?** 

Yes. 부분 함수 종속에서 “부분”이 의미하는 것은 두 키 중 하나만 이야기하는 것으로 두 키 중 하나의 키에 대해서만 종속되는 경우를 부분 함수 종속이라고 이야기 한다. 

**부분 함수 종속과 완전 함수 종속의 차이점은 무엇인가?** 

완전 함수 종속은 어떤 속성이 기본키 전체에 의존하는 관계

부분 함수 종속은 어떤 속성이 복합키의 일부 속성에만 의존하는 경우, 복합키를 가진 테이블에서만 발생 

## 제 3 정규형 (3NF)

이행적 종속이 없는 것  ⇒ 모든 컬럼이 다른 컬럼들에 대해서 직접적으로 종속되어야 하며 다른 속성에 의존해서는 안된다. 

이행적 종속 : 각 컬럼들이 서로 직접 연결되는게 아니라 중간 컬럼을 통해 간접적으로 연결되는 것 

| 학생ID | 반ID | 담당선생님ID |
| --- | --- | --- |
| 100 | 200 | 300 |
| 101 | 200 | 300 |
| 102 | 201 | 301 |
| 103 | 200 | 300 |
| 104 | 201 | 301 |

담당 선생님 ID는 학생 ID에 대해 직접적인 연관을 갖지 않는다. 학생 ID → 반 ID → 담당선생님ID 처럼 간접적 연결관계를 가지지만 학생ID → 담당선생님ID 처럼 직접적으로 연관되지는 않는다. 

이럴때 발생할 수 있는 문제는 (1) 데이터 중복, (2) 갱신이상현상 이다. 

(1) 데이터 중복 

담당선생님 ID가 중복되어서 테이블 내에 저장되고 있다. 반이 200인 학생 데이터의 경우에는 모두 동일하게 300이라는 담당선생님ID 값을 갖게 된다. 

(2) 갱신이상현상

선생님 정보가 바뀌는 경우 반 ID에 대해서 일일히 선생님 ID를 갱신해줘야 한다. 

## 반정규화

정규화는 기본적으로 컬럼 간 결합도를 낮추기 위해 테이블을 분리하는 행위 

정규화를 많이 하게 되면 자연히 테이블이 많아진다. 

→ join 등 쿼리를 수행할 때 테이블이 많아 연산 속도가 느려지고 부하가 발생할 수 있다. 

그래서 갱신 빈도는 낮지만, 조회 빈도는 높은 테이블의 경우에는 반정규화를 진행