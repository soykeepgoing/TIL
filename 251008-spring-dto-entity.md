# Dto와 Entity 

## Dto(Data Transfer Object)

- 계층 간에 데이터를 주고받기 위한 객체이다.
- 유스케이스에 맞게 각 요청과 응답에 필요한 데이터를 담는다. (필요한 필드만 선택)
- 주로 `Controller <-> Service` 계층에서 사용된다. 

## Entity 
- 데이터베이스 테이블과 직접 매핑되는 클래스로 DB 칼럼과 동일한 필드 구조를 가진다. 
- 주로 `Service <-> Repository` 계층에서 사용된다. 

## Dto, Entity 각각 언제 쓰는걸까? 

Dto는 유스케이스에 맞는 필요한 기능을 위해 데이터를 표현하는 객체, Entity는 전체 데이터를 보여준다.

유스케이스를 직접 정의하고 구현해보면 데이터 전체가 필요하지 않는 경우가 많다.
예를 들어 회원가입에서는 사용자 지역 정보가 필요했지만 로그인에서는 불필요한 정보이다. 

유스케이스별로 정리를 한다기 보다 spring mvc 안의 계층 간의 데이터 흐름에서 서로 맡는 역할이 따로 있다. 

Dto의 경우 사용자 요청에 더 가까운 계층에서, Entity의 경우 서버 데이터베이스에 더 가까운 계층에서 사용된다. 

## 왜 이렇게 분리해서 써야할까? 

Entity만 사용하는 경우 사용자 요청에 모든 데이터를 요구하거나 세팅해줘야 한다. 유스케이스가 바뀌면 자연스럽게 DB에도 영향을 줄 수 있다. 각각의 계층에서는 모든 기능에 대해서 신경을 써줘야 한다. 데이터베이스의 필드 전체가 노출되어 보안 상의 문제도 존재한다. 

Dto만 사용하는 경우 결국 데이터베이스에 저장할 때에는 각 칼럼에 대한 정보를 저장해줘야 한다. dto만 사용하는 것은 비효율적이다. 

무엇보다 분리해서 사용하지 않으면 명확한 책임 분리가 힘들고 의존성이 강해진다. 데이터 전송이 이뤄지는 각 기능에 대해서 담당하는 객체를 통해 서로 다른 계층에 영향을 주지 않게 할 수 있다. 