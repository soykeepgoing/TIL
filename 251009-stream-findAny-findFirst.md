csv로 구성된 데이터베이스에서 사용자를 조회하는 기능을 만들었다. (findByID)

함수를 만들면서 처음에는 `forEach`로 순회하다가 stream으로 필터링해 결과를 반환하도록 했다. `List<Entity>` 로 반환했다. 
그런데 해당 값에 대해서 여러 값이 존재하지 않게끔 하는 기능이기 때문에 발견되는 요소만 반환하기로 함수를 리팩토링했다. 

그 과정에서 stream의 findAny와 findFirst 중 하나를 선택하려고 한다. 차이가 무엇인지 활용되는 예시가 어떤게 있는지를 중심으로 알아보았다. 

--- 

## `findFirst()` : 무조건 첫 번째를 찾는다. 
이름 그래도 스트림 안에서 순서상 가장 앞에 있는 요소를 찾아서 봔한
- 동작 방식 : 스트림 요소등을 처음부터 순서대로 확인하며, 필터링 조건을 만족하는 첫 번째 요소를 발견하는 즉시 반환 
- 사용 예시
    - 리스트, 배열 등 순서가 중요한 컬렉션에서 
    - 정확히 순서가 보장된 결과가 필요한 경우 

## `findAny()`: 아무거나 빨리 찾는다. 
스트림 내에서 가장 먼저 발견되는 요소를 반환한다. 순서에 관계없이 가장 빠르게 결과를 얻는 것이 목표이다. 
- 동작 방식 : 병렬 스트림에서 여러 스레드가 동시에 요소를 탐색할 때, 결과를 반환하는 스레드의 요소를 즉시 반환하고 종료하는 방식 
- 사용 예시 
    - 순서가 중요하지 않고 조건을 만족하는 요소가 있다는 사실과 그 값만 중요한 경우 
    - 병렬 처리 환경에서 성능/속도 최적화를 하고 싶을 때 

## 정리하자면 

- 순서가 무조건 중요하다면 => `findFirst`
- 순서가 중요하지 않고 성능 최적화가 우선이라면 => `findAny`


## 병렬 스트림이 어떤걸까? 

처리해야 하는 데이터가 많을 때 병렬 스트림을 사용한다. 작업을 쪼개고 work thread에서 각각 작업을 처리한 다음에 합치는 방식으로 효율을 높일 수 있다. (Fork/Join Framework) 

데이터 양이 매우 많거나 처리할 태스크가 많을 때 주로 선택하며 별도의 코어에서 코드를 동작할 수 있다. 최종적인 결과는 나중에 합치는 방식(combination)으로 처리할 수 있다. 

다만 순서를 보장하지 않기 때문에 매 동작마다 결과가 달라질 수 있다. 


## 참고 
https://devjjsjjj.tistory.com/entry/Java-Stream-findAny%EC%99%80-findFirst%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90

https://dev-coco.tistory.com/183#google_vignette

https://www.baeldung.com/java-when-to-use-parallel-stream

https://bepoz-study-diary.tistory.com/344